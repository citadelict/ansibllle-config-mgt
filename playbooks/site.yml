---
- name: Include dynamic variables
  hosts: all
  become: yes
  tasks:
    - include_vars: ../dynamic-assignments/env-vars.yml
      tags:
        - always

- name: DB Server assignment
  hosts: uat-dbservers
  become: yes
  tasks:
    - ansible.builtin.import_playbook: ../static-assignments/db-servers.yml

- name: Webservers Tasks
  hosts: uat-webservers
  become: yes
  tasks:
    - ansible.builtin.import_playbook: ../static-assignments/uat-webservers.yml

- name: Load balancer Tasks
  hosts: all
  become: yes
  tasks:
    - ansible.builtin.import_playbook: ../static-assignments/loadbalancers.yml
  when: load_balancer_is_required
